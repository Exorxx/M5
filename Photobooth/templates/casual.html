{% extends "base.html" %}

{% block title %}Casual Mode - Photo Booth{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/casual.css') }}">
{% endblock %}
{% block extra_js %}
<script src="{{ url_for('static', filename='js/casual.js') }}"></script>
{% endblock %}

{% block content %}
<main>
    <h2>Casual Photo Session</h2>
    <p>Choose your favorite layout style!</p>

    <!-- Layout Selection -->
    <div id="layout-selection" class="section-active">
        <h3>Select Your Layout</h3>
        <div class="carousel-container">
            <button class="carousel-button prev" aria-label="Previous template">&#10094;</button>
            <div class="template-carousel" id="template-container">
                <!-- Templates will be dynamically inserted here -->
            </div>
            <button class="carousel-button next" aria-label="Next template">&#10095;</button>
        </div>
        <button id="confirm-layout" class="primary-button">Select Layout</button>
    </div>

    <!-- Capture Section -->
    <div id="capture-section" class="section-inactive">
        <h3>Pose <span id="pose-number">1</span>/4</h3>
        <button id="toggle-camera">Open Camera</button>
        <div class="video-container">
            <img id="video-feed" class="camera-feed" alt="Live camera feed">
        </div>
        <div class="capture-controls">
            <button id="capture-btn">Capture Pose</button>
            <button id="retake-btn" class="hidden">Retake</button>
        </div>
    </div>

    <!-- Preview Section -->
    <div id="preview-section" class="section-inactive">
        <h3>Your <span id="layout-name">Layout</span> Photos</h3>
        <div class="canvas-container">
            <canvas id="result-canvas" width="1800" height="1200"></canvas>
        </div>
        <div class="preview-controls">
            <button id="save-layout">Save All</button>
            <button id="start-over">Start Over</button>
        </div>
    </div>

    <a href="{{ url_for('mode') }}" class="btn-link">Back to Mode Selection</a>
</main>
{% endblock %}