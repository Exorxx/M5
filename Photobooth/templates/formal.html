{% extends "base.html" %}

{% block title %}Formal Mode - Photo Booth{% endblock %}
{% block extra_css %}<link rel="stylesheet" href="{{ url_for('static', filename='css/formal.css') }}">{% endblock %}
{% block extra_js %}<script src="{{ url_for('static', filename='js/formal.js') }}"></script>{% endblock %}

{% block content %}
<main>
    <a href="{{ url_for('mode') }}" class="back-card">
        <span class="back-content" id="back-content">Go Back</span>
    </a>
    <!-- Capture Section -->
    <div id="capture-section">
        <div class="video-container">
            <img id="video-feed" class="camera-feed">
            <img id="formal-guide" src="/static/others/1x1and2x2guide.png" alt="guide">
            <div id="flash-overlay"></div>
            <div id="countdown-display"></div>
            <img src="/static/others/capture.png" id="capture-btn"></img>
        </div>
        
    </div>

    <!-- Preview Section -->
    <div id="preview-section" class="hidden">
        <h3>Preview & Customization</h3>
        
        <!-- Main Preview Image -->
        <img id="main-preview" class="main-preview" alt="Captured Photo">
        
        <!-- Customization Controls -->
        <div class="customization-options">
            <h4>Edit Your Photo</h4>
            <div class="control-group">
                <label for="brightness">Brightness:</label>
                <input type="range" id="brightness" min="-100" max="100" value="0">
            </div>
            <div class="control-group">
                <label for="contrast">Contrast:</label>
                <input type="range" id="contrast" min="-100" max="100" value="0">
            </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="preview-controls">
            <button id="finalize-btn">Finalize</button>
            <button id="capture-again-btn">Capture Again</button>
        </div>
    </div>

    <!-- Results Section -->
    <div id="results-section" class="hidden">
        <h3>Your Final Photo</h3>
        
        <!-- 4R Template Canvas -->
        <div class="template-container">
            <canvas id="result-canvas"></canvas>
        </div>
        
        <!-- Action Buttons -->
        <div class="results-controls">
            <button id="download-btn">Send to E-Mail & Print</button>
            <button id="back-to-preview-btn">Back to Preview</button>
        </div>
    </div>

    <div id="sendingOverlay" class="overlay section-inactive">
        <div class="spinner"></div>
        <p>Sending your photo... Please wait.</p>
    </div>
{% endblock %}